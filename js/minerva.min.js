(function(){var H=[{id:4,tri:"AFG",di:" AF",name:"Afghanistan"},{id:8,tri:"ALB",di:" AL",name:"Albania"},{id:12,tri:"DZA",di:" DZ",name:"Algeria"},{id:16,tri:"ASM",di:" AS",name:"American Samoa"},{id:20,tri:"AND",di:" AD",name:"Andorra"},{id:24,tri:"AGO",di:" AO",name:"Angola"},{id:660,tri:"AIA",di:" AI",name:"Anguilla"},{id:10,tri:"ATA",di:" AQ",name:"Antarctica"},{id:28,tri:"ATG",di:" AG",name:"Antigua and Barbuda"},{id:32,tri:"ARG",di:" AR",name:"Argentina"},{id:51,tri:"ARM",di:" AM",name:"Armenia"},
{id:533,tri:"ABW",di:" AW",name:"Aruba"},{id:36,tri:"AUS",di:" AU",name:"Australia"},{id:40,tri:"AUT",di:" AT",name:"Austria"},{id:31,tri:"AZE",di:" AZ",name:"Azerbaijan"},{id:44,tri:"BHS",di:" BS",name:"Bahamas, The"},{id:48,tri:"BHR",di:" BH",name:"Bahrain"},{id:50,tri:"BGD",di:" BD",name:"Bangladesh"},{id:52,tri:"BRB",di:" BB",name:"Barbados"},{id:112,tri:"BLR",di:" BY",name:"Belarus"},{id:56,tri:"BEL",di:" BE",name:"Belgium"},{id:84,tri:"BLZ",di:" BZ",name:"Belize"},{id:204,tri:"BEN",di:" BJ",
name:"Benin"},{id:60,tri:"BMU",di:" BM",name:"Bermuda"},{id:64,tri:"BTN",di:" BT",name:"Bhutan"},{id:68,tri:"BOL",di:" BO",name:"Bolivia"},{id:70,tri:"BIH",di:" BA",name:"Bosnia and Herzegovina"},{id:72,tri:"BWA",di:" BW",name:"Botswana"},{id:74,tri:"BVT",di:" BV",name:"Bouvet Island"},{id:76,tri:"BRA",di:" BR",name:"Brazil"},{id:86,tri:"IOT",di:" IO",name:"British Indian Ocean Territory"},{id:92,tri:"VGB",di:" VG",name:"British Virgin Islands"},{id:96,tri:"BRN",di:" BN",name:"Brunei"},{id:100,tri:"BGR",
di:" BG",name:"Bulgaria"},{id:854,tri:"BFA",di:" BF",name:"Burkina Faso"},{id:104,tri:"MMR",di:" MM",name:"Burma"},{id:108,tri:"BDI",di:" BI",name:"Burundi"},{id:132,tri:"CPV",di:" CV",name:"Cabo Verde"},{id:116,tri:"KHM",di:" KH",name:"Cambodia"},{id:120,tri:"CMR",di:" CM",name:"Cameroon"},{id:124,tri:"CAN",di:" CA",name:"Canada"},{id:136,tri:"CYM",di:" KY",name:"Cayman Islands"},{id:140,tri:"CAF",di:" CF",name:"Central African Republic"},{id:148,tri:"TCD",di:" TD",name:"Chad"},{id:152,tri:"CHL",
di:" CL",name:"Chile"},{id:156,tri:"CHN",di:" CN",name:"China"},{id:162,tri:"CXR",di:" CX",name:"Christmas Island"},{id:166,tri:"CCK",di:" CC",name:"Cocos (Keeling) Islands"},{id:170,tri:"COL",di:" CO",name:"Colombia"},{id:174,tri:"COM",di:" KM",name:"Comoros"},{id:180,tri:"COD",di:" CD",name:"Congo, Democratic Republic of the"},{id:178,tri:"COG",di:" CG",name:"Congo, Republic of the"},{id:184,tri:"COK",di:" CK",name:"Cook Islands"},{id:188,tri:"CRI",di:" CR",name:"Costa Rica"},{id:384,tri:"CIV",
di:" CI",name:"Cote d&apos;Ivoire"},{id:191,tri:"HRV",di:" HR",name:"Croatia"},{id:192,tri:"CUB",di:" CU",name:"Cuba"},{id:531,tri:"CUW",di:" CW",name:"Curacao"},{id:196,tri:"CYP",di:" CY",name:"Cyprus"},{id:203,tri:"CZE",di:" CZ",name:"Czech Republic"},{id:208,tri:"DNK",di:" DK",name:"Denmark"},{id:262,tri:"DJI",di:" DJ",name:"Djibouti"},{id:212,tri:"DMA",di:" DM",name:"Dominica"},{id:214,tri:"DOM",di:" DO",name:"Dominican Republic"},{id:218,tri:"ECU",di:" EC",name:"Ecuador"},{id:818,tri:"EGY",di:" EG",
name:"Egypt"},{id:222,tri:"SLV",di:" SV",name:"El Salvador"},{id:226,tri:"GNQ",di:" GQ",name:"Equatorial Guinea"},{id:232,tri:"ERI",di:" ER",name:"Eritrea"},{id:233,tri:"EST",di:" EE",name:"Estonia"},{id:231,tri:"ETH",di:" ET",name:"Ethiopia"},{id:238,tri:"FLK",di:" FK",name:"Falkland Islands (Islas Malvinas)"},{id:234,tri:"FRO",di:" FO",name:"Faroe Islands"},{id:242,tri:"FJI",di:" FJ",name:"Fiji"},{id:246,tri:"FIN",di:" FI",name:"Finland"},{id:250,tri:"FRA",di:" FR",name:"France"},{id:249,tri:"FXX",
di:" FX",name:"France, Metropolitan"},{id:254,tri:"GUF",di:" GF",name:"French Guiana"},{id:258,tri:"PYF",di:" PF",name:"French Polynesia"},{id:260,tri:"ATF",di:" TF",name:"French Southern and Antarctic Lands"},{id:266,tri:"GAB",di:" GA",name:"Gabon"},{id:270,tri:"GMB",di:" GM",name:"Gambia, The"},{id:275,tri:"PSE",di:" PS",name:"Palestinian Territories"},{id:268,tri:"GEO",di:" GE",name:"Georgia"},{id:276,tri:"DEU",di:" DE",name:"Germany"},{id:288,tri:"GHA",di:" GH",name:"Ghana"},{id:292,tri:"GIB",
di:" GI",name:"Gibraltar"},{id:300,tri:"GRC",di:" GR",name:"Greece"},{id:304,tri:"GRL",di:" GL",name:"Greenland"},{id:308,tri:"GRD",di:" GD",name:"Grenada"},{id:312,tri:"GLP",di:" GP",name:"Guadeloupe"},{id:316,tri:"GUM",di:" GU",name:"Guam"},{id:320,tri:"GTM",di:" GT",name:"Guatemala"},{id:831,tri:"GGY",di:" GG",name:"Guernsey"},{id:324,tri:"GIN",di:" GN",name:"Guinea"},{id:624,tri:"GNB",di:" GW",name:"Guinea-Bissau"},{id:328,tri:"GUY",di:" GY",name:"Guyana"},{id:332,tri:"HTI",di:" HT",name:"Haiti"},
{id:334,tri:"HMD",di:" HM",name:"Heard Island and McDonald Islands"},{id:336,tri:"VAT",di:" VA",name:"Holy See (Vatican City)"},{id:340,tri:"HND",di:" HN",name:"Honduras"},{id:344,tri:"HKG",di:" HK",name:"Hong Kong"},{id:348,tri:"HUN",di:" HU",name:"Hungary"},{id:352,tri:"ISL",di:" IS",name:"Iceland"},{id:356,tri:"IND",di:" IN",name:"India"},{id:360,tri:"IDN",di:" ID",name:"Indonesia"},{id:364,tri:"IRN",di:" IR",name:"Iran"},{id:368,tri:"IRQ",di:" IQ",name:"Iraq"},{id:372,tri:"IRL",di:" IE",name:"Ireland"},
{id:833,tri:"IMN",di:" IM",name:"Isle of Man"},{id:376,tri:"ISR",di:" IL",name:"Israel"},{id:380,tri:"ITA",di:" IT",name:"Italy"},{id:388,tri:"JAM",di:" JM",name:"Jamaica"},{id:392,tri:"JPN",di:" JP",name:"Japan"},{id:832,tri:"JEY",di:" JE",name:"Jersey"},{id:400,tri:"JOR",di:" JO",name:"Jordan"},{id:398,tri:"KAZ",di:" KZ",name:"Kazakhstan"},{id:404,tri:"KEN",di:" KE",name:"Kenya"},{id:296,tri:"KIR",di:" KI",name:"Kiribati"},{id:408,tri:"PRK",di:" KP",name:"Korea, North"},{id:410,tri:"KOR",di:" KR",
name:"Korea, South"},{id:-2,tri:"XKS",di:" XK",name:"Kosovo"},{id:414,tri:"KWT",di:" KW",name:"Kuwait"},{id:417,tri:"KGZ",di:" KG",name:"Kyrgyzstan"},{id:418,tri:"LAO",di:" LA",name:"Laos"},{id:428,tri:"LVA",di:" LV",name:"Latvia"},{id:422,tri:"LBN",di:" LB",name:"Lebanon"},{id:426,tri:"LSO",di:" LS",name:"Lesotho"},{id:430,tri:"LBR",di:" LR",name:"Liberia"},{id:434,tri:"LBY",di:" LY",name:"Libya"},{id:438,tri:"LIE",di:" LI",name:"Liechtenstein"},{id:440,tri:"LTU",di:" LT",name:"Lithuania"},{id:442,
tri:"LUX",di:" LU",name:"Luxembourg"},{id:446,tri:"MAC",di:" MO",name:"Macau"},{id:807,tri:"MKD",di:" MK",name:"Macedonia"},{id:450,tri:"MDG",di:" MG",name:"Madagascar"},{id:454,tri:"MWI",di:" MW",name:"Malawi"},{id:458,tri:"MYS",di:" MY",name:"Malaysia"},{id:462,tri:"MDV",di:" MV",name:"Maldives"},{id:466,tri:"MLI",di:" ML",name:"Mali"},{id:470,tri:"MLT",di:" MT",name:"Malta"},{id:584,tri:"MHL",di:" MH",name:"Marshall Islands"},{id:474,tri:"MTQ",di:" MQ",name:"Martinique"},{id:478,tri:"MRT",di:" MR",
name:"Mauritania"},{id:480,tri:"MUS",di:" MU",name:"Mauritius"},{id:175,tri:"MYT",di:" YT",name:"Mayotte"},{id:484,tri:"MEX",di:" MX",name:"Mexico"},{id:583,tri:"FSM",di:" FM",name:"Micronesia, Federated States of"},{id:498,tri:"MDA",di:" MD",name:"Moldova"},{id:492,tri:"MCO",di:" MC",name:"Monaco"},{id:496,tri:"MNG",di:" MN",name:"Mongolia"},{id:499,tri:"MNE",di:" ME",name:"Montenegro"},{id:500,tri:"MSR",di:" MS",name:"Montserrat"},{id:504,tri:"MAR",di:" MA",name:"Morocco"},{id:508,tri:"MOZ",di:" MZ",
name:"Mozambique"},{id:516,tri:"NAM",di:" NA",name:"Namibia"},{id:520,tri:"NRU",di:" NR",name:"Nauru"},{id:524,tri:"NPL",di:" NP",name:"Nepal"},{id:528,tri:"NLD",di:" NL",name:"Netherlands"},{id:540,tri:"NCL",di:" NC",name:"New Caledonia"},{id:554,tri:"NZL",di:" NZ",name:"New Zealand"},{id:558,tri:"NIC",di:" NI",name:"Nicaragua"},{id:562,tri:"NER",di:" NE",name:"Niger"},{id:566,tri:"NGA",di:" NG",name:"Nigeria"},{id:570,tri:"NIU",di:" NU",name:"Niue"},{id:574,tri:"NFK",di:" NF",name:"Norfolk Island"},
{id:580,tri:"MNP",di:" MP",name:"Northern Mariana Islands"},{id:-1,tri:"",di:"",name:"Northern Cyprus"},{id:578,tri:"NOR",di:" NO",name:"Norway"},{id:512,tri:"OMN",di:" OM",name:"Oman"},{id:586,tri:"PAK",di:" PK",name:"Pakistan"},{id:585,tri:"PLW",di:" PW",name:"Palau"},{id:591,tri:"PAN",di:" PA",name:"Panama"},{id:598,tri:"PNG",di:" PG",name:"Papua New Guinea"},{id:600,tri:"PRY",di:" PY",name:"Paraguay"},{id:604,tri:"PER",di:" PE",name:"Peru"},{id:608,tri:"PHL",di:" PH",name:"Philippines"},{id:612,
tri:"PCN",di:" PN",name:"Pitcairn Islands"},{id:616,tri:"POL",di:" PL",name:"Poland"},{id:620,tri:"PRT",di:" PT",name:"Portugal"},{id:630,tri:"PRI",di:" PR",name:"Puerto Rico"},{id:634,tri:"QAT",di:" QA",name:"Qatar"},{id:638,tri:"REU",di:" RE",name:"Reunion"},{id:642,tri:"ROU",di:" RO",name:"Romania"},{id:643,tri:"RUS",di:" RU",name:"Russia"},{id:646,tri:"RWA",di:" RW",name:"Rwanda"},{id:652,tri:"BLM",di:" BL",name:"Saint Barthelemy"},{id:654,tri:"SHN",di:" SH",name:"Saint Helena, Ascension, and Tristan da Cunha"},
{id:659,tri:"KNA",di:" KN",name:"Saint Kitts and Nevis"},{id:662,tri:"LCA",di:" LC",name:"Saint Lucia"},{id:663,tri:"MAF",di:" MF",name:"Saint Martin"},{id:666,tri:"SPM",di:" PM",name:"Saint Pierre and Miquelon"},{id:670,tri:"VCT",di:" VC",name:"Saint Vincent and the Grenadines"},{id:882,tri:"WSM",di:" WS",name:"Samoa"},{id:674,tri:"SMR",di:" SM",name:"San Marino"},{id:678,tri:"STP",di:" ST",name:"Sao Tome and Principe"},{id:682,tri:"SAU",di:" SA",name:"Saudi Arabia"},{id:686,tri:"SEN",di:" SN",name:"Senegal"},
{id:688,tri:"SRB",di:" RS",name:"Serbia"},{id:690,tri:"SYC",di:" SC",name:"Seychelles"},{id:694,tri:"SLE",di:" SL",name:"Sierra Leone"},{id:702,tri:"SGP",di:" SG",name:"Singapore"},{id:534,tri:"SXM",di:" SX",name:"Sint Maarten"},{id:703,tri:"SVK",di:" SK",name:"Slovakia"},{id:705,tri:"SVN",di:" SI",name:"Slovenia"},{id:90,tri:"SLB",di:" SB",name:"Solomon Islands"},{id:706,tri:"SOM",di:" SO",name:"Somalia"},{id:-3,tri:"SOM",di:" SO",name:"Somaliland"},{id:710,tri:"ZAF",di:" ZA",name:"South Africa"},
{id:239,tri:"SGS",di:" GS",name:"South Georgia and the Islands"},{id:728,tri:"SSD",di:" SS",name:"South Sudan"},{id:724,tri:"ESP",di:" ES",name:"Spain"},{id:144,tri:"LKA",di:" LK",name:"Sri Lanka"},{id:729,tri:"SDN",di:" SD",name:"Sudan"},{id:740,tri:"SUR",di:" SR",name:"Suriname"},{id:744,tri:"SJM",di:" SJ",name:"Svalbard"},{id:748,tri:"SWZ",di:" SZ",name:"Swaziland"},{id:752,tri:"SWE",di:" SE",name:"Sweden"},{id:756,tri:"CHE",di:" CH",name:"Switzerland"},{id:760,tri:"SYR",di:" SY",name:"Syria"},
{id:158,tri:"TWN",di:" TW",name:"Taiwan"},{id:762,tri:"TJK",di:" TJ",name:"Tajikistan"},{id:834,tri:"TZA",di:" TZ",name:"Tanzania"},{id:764,tri:"THA",di:" TH",name:"Thailand"},{id:626,tri:"TLS",di:" TL",name:"Timor-Leste"},{id:768,tri:"TGO",di:" TG",name:"Togo"},{id:772,tri:"TKL",di:" TK",name:"Tokelau"},{id:776,tri:"TON",di:" TO",name:"Tonga"},{id:780,tri:"TTO",di:" TT",name:"Trinidad and Tobago"},{id:788,tri:"TUN",di:" TN",name:"Tunisia"},{id:792,tri:"TUR",di:" TR",name:"Turkey"},{id:795,tri:"TKM",
di:" TM",name:"Turkmenistan"},{id:796,tri:"TCA",di:" TC",name:"Turks and Caicos Islands"},{id:798,tri:"TUV",di:" TV",name:"Tuvalu"},{id:800,tri:"UGA",di:" UG",name:"Uganda"},{id:804,tri:"UKR",di:" UA",name:"Ukraine"},{id:784,tri:"ARE",di:" AE",name:"United Arab Emirates"},{id:826,tri:"GBR",di:" GB",name:"United Kingdom"},{id:840,tri:"USA",di:" US",name:"United States"},{id:581,tri:"UMI",di:" UM",name:"United States Minor Outlying Islands"},{id:858,tri:"URY",di:" UY",name:"Uruguay"},{id:860,tri:"UZB",
di:" UZ",name:"Uzbekistan"},{id:548,tri:"VUT",di:" VU",name:"Vanuatu"},{id:862,tri:"VEN",di:" VE",name:"Venezuela"},{id:704,tri:"VNM",di:" VN",name:"Vietnam"},{id:850,tri:"VIR",di:" VI",name:"Virgin Islands"},{id:876,tri:"WLF",di:" WF",name:"Wallis and Futuna"},{id:275,tri:"PSE",di:" PS",name:"West Bank"},{id:732,tri:"ESH",di:" EH",name:"Western Sahara"},{id:887,tri:"YEM",di:" YE",name:"Yemen"},{id:894,tri:"ZMB",di:" ZM",name:"Zambia"},{id:716,tri:"ZWE",di:" ZW",name:"Zimbabwe"}],P=[{id:1,name:"Alabama",
di:"AL"},{id:2,name:"Alaska",di:"AK"},{id:4,name:"Arizona",di:"AZ"},{id:5,name:"Arkansas",di:"AR"},{id:6,name:"California",di:"CA"},{id:8,name:"Colorado",di:"CO"},{id:9,name:"Connecticut",di:"CT"},{id:10,name:"Delaware",di:"DE"},{id:12,name:"Florida",di:"FL"},{id:13,name:"Georgia",di:"GA"},{id:15,name:"Hawaii",di:"HI"},{id:16,name:"Idaho",di:"ID"},{id:17,name:"Illinois",di:"IL"},{id:18,name:"Indiana",di:"IN"},{id:19,name:"Iowa",di:"IA"},{id:20,name:"Kansas",di:"KS"},{id:21,name:"Kentucky",di:"KY"},
{id:22,name:"Louisiana",di:"LA"},{id:23,name:"Maine",di:"ME"},{id:24,name:"Maryland",di:"MD"},{id:25,name:"Massachusetts",di:"MA"},{id:26,name:"Michigan",di:"MI"},{id:27,name:"Minnesota",di:"MN"},{id:28,name:"Mississippi",di:"MS"},{id:29,name:"Missouri",di:"MO"},{id:30,name:"Montana",di:"MT"},{id:31,name:"Nebraska",di:"ME"},{id:32,name:"Nevada",di:"MV"},{id:33,name:"New Hampshire",di:"NH"},{id:34,name:"New Jersey",di:"NJ"},{id:35,name:"New Mexico",di:"NM"},{id:36,name:"New York",di:"NY"},{id:37,name:"North Carolina",
di:"NC"},{id:38,name:"North Dakota",di:"ND"},{id:39,name:"Ohio",di:"OH"},{id:40,name:"Oklahoma",di:"OK"},{id:41,name:"Oregon",di:"OR"},{id:42,name:"Pennsylvania",di:"PA"},{id:44,name:"Rhode Island",di:"RI"},{id:45,name:"South Carolina",di:"SC"},{id:46,name:"South Dakota",di:"SD"},{id:47,name:"Tennessee",di:"TN"},{id:48,name:"Texas",di:"TX"},{id:49,name:"Utah",di:"UT"},{id:50,name:"Vermont",di:"VT"},{id:51,name:"Virginia",di:"VA"},{id:53,name:"Washington",di:"WA"},{id:54,name:"West Virginia",di:"WV"},
{id:55,name:"Wisconsin",di:"WI"},{id:56,name:"Wyoming",di:"WY"}];angular.module("mvMinerva",[]).constant("errMsg","No Data to Display").provider("minerva",function(){var m={basePath:"../../minerva",mode:"dev"},C="";this.setPath=function(q){var T={};angular.extend(T,m,q);C=T.basePath+"/"+T.mode+"/"};var q={templatesPath:function(){return C+"templates/"},mapsPath:function(){return C+"maps/"}};this.$get=function(){return q}}).directive("mvHeader",function(){return{restrict:"E",transclude:!0,replace:!0,
scope:{mvTitle:"@"},template:'<div class="mv-header">     <div class="mv-title">{{mvTitle}}</div>     <div class="mv-title-right"><ng-transclude></ng-transclude></div>  </div>'}}).directive("mvBody",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvCols:"@"},template:'<div class="mv-body">     <div class="mv-widget-container g{{mvCols}}r">        <ng-transclude></ng-transclude>     </div>  </div>'}}).directive("mvFooter",function(){return{restrict:"E",transclude:!0,replace:!0,template:'<div class="mv-footer">     <ng-transclude></ng-transclude>  </div>'}}).directive("mvRow",
function(){return{restrict:"E",transclude:!0,replace:!0,template:"<div>     <ng-transclude></ng-transclude>  </div>"}}).directive("mvGroup",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvSize:"@",mvStyle:"@"},template:'<div class="gr-{{mvSize}} break" ng-style="{{mvStyle}}">     <ng-transclude></ng-transclude>  </div>'}}).directive("mvAnyNum",["errMsg",function(m){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvIdHead:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},
template:'<div class="widget g-{{mvSize}}" id="{{mvId}}"><div class="w-head lightbox-head">{{mvTitle}}</div><div class="w-body lightbox-body w-mediumtext"> <div class="w-any-num" ng-style="{{mvStyle}}"> <table> <tr> <th ng-repeat="stat in mvData.data" class="{{stat.titleColor}}"> {{stat.title}} </th> </tr> <tr> <td ng-repeat="stat in mvData.data" class="{{stat.numberColor}}"> {{stat.number}} </td> </tr> </table> </div> <ng-transclude></ng-transclude> <div class="w-nodata-anynum" ng-show="mvData == null">'+
m+'</div> </div> <div class="w-any-num-title">{{mvData.title}}</div> </div>'}}]).directive("mvAnyNumLink",["errMsg",function(m){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvIdHead:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvModal:"="},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}}</div>    <div class="w-body lightbox-body w-mediumtext">       <div class="w-any-num" ng-style="{{mvStyle}}">          <table>             <tr>                <th ng-repeat="stat in mvData.data" class="{{stat.titleColor}}">                   {{stat.title}}                </th>             </tr>             <tr>                <td ng-repeat="stat in mvData.data" class="{{stat.numberColor}}">                   <a ng-click="openModal(stat, mvModal)" style="cursor: pointer;">{{stat.number}}</a>                </td>             </tr>          </table>       </div>       <ng-transclude></ng-transclude>       <div class="w-nodata-anynum" ng-show="mvData == null">'+
m+'</div>    </div>    <div class="w-any-num-title">{{mvData.title}}</div> </div>',link:function(m,q,I){m.openModal=function(m,q){q.open({template:'<div class="modal-body">      <div class="modalContent">         <div class="modalTitle">'+m.title+'</div>         <div class="modalInfo"><pre>'+m.content+"</pre></div>      </div>  </div>",windowClass:"middleWindow"})}}}}]).directive("mvAnyNumLinkVertical",["errMsg",function(m){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvIdHead:"@",
mvTitle:"@",mvSize:"@",mvStyle:"@",mvModal:"="},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}}</div>    <div class="w-body lightbox-body w-mediumtext">       <div class="w-any-num" ng-style="{{mvStyle}}">          <table>             <tr ng-repeat="stat in mvData.data">                <td>                   <table style="font-size:1em;">                      <tr>                         <th class="{{stat.titleColor}}">                            {{stat.title}}                         </th>                      </tr>                      <tr>                         <td class="{{stat.numberColor}}">                            <a ng-click="openModal(stat, mvModal)" style="cursor: pointer;">{{stat.number}}</a>                         </td>                      </tr>                   </table>                </td>             </tr>          </table>       </div>       <ng-transclude></ng-transclude>       <div class="w-nodata-anynum" ng-show="mvData == null">'+
m+'</div>    </div>    <div class="w-any-num-title">{{mvData.title}}</div> </div>',link:function(m,q,I){m.openModal=function(m,q){q.open({template:'<div class="modal-body">      <div class="modalContent">         <div class="modalTitle">'+m.title+'</div>         <div class="modalInfo"><pre>'+m.content+"</pre></div>      </div>  </div>",windowClass:"middleWindow"})}}}}]).directive("mvAnyNumHover",["errMsg",function(m){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvIdHead:"@",
mvTitle:"@",mvSize:"@",mvStyle:"@",mvPopover:"="},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}}</div>    <div class="w-body lightbox-body w-mediumtext">       <div class="w-any-num" ng-style="{{mvStyle}}">          <table>             <tr>                <th ng-repeat="stat in mvData.data" class="{{stat.titleColor}}">                   {{stat.title}}                </th>             </tr>             <tr>                <td ng-repeat="stat in mvData.data" class="{{stat.numberColor}}">                   <span ng-hide="stat.link" popover="{{stat.content}}" popover-trigger="mouseenter" popover-placement="{{mvPopover.placement}}">{{stat.number}}</span>                   <a ng-show="stat.link" href="{{stat.link}}" style="cursor: pointer;" popover="{{stat.content}}" popover-trigger="mouseenter" popover-placement="{{mvPopover.placement}}">{{stat.number}}</a>                </td>             </tr>          </table>       </div>       <ng-transclude></ng-transclude>       <div class="w-nodata-anynum" ng-show="mvData == null">'+
m+'</div>    </div>    <div class="w-any-num-title">{{mvData.title}}</div> </div>'}}]).directive("mvAnyNumHoverVertical",["errMsg",function(m){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvIdHead:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvPopover:"="},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}}</div>    <div class="w-body lightbox-body w-mediumtext">       <div class="w-any-num" ng-style="{{mvStyle}}">          <table>             <tr ng-repeat="stat in mvData.data">                <td>                   <table style="font-size:1em;">                      <tr>                         <th class="{{stat.titleColor}}">                            {{stat.title}}                         </th>                      </tr>                      <tr>                         <td class="{{stat.numberColor}}">                            <span ng-hide="stat.link" popover="{{stat.content}}" popover-trigger="mouseenter" popover-placement="{{mvPopover.placement}}">{{stat.number}}</span>                            <a ng-show="stat.link" href="{{stat.link}}" style="cursor: pointer;" popover="{{stat.content}}" popover-trigger="mouseenter" popover-placement="{{mvPopover.placement}}">{{stat.number}}</a>                         </td>                      </tr>                   </table>                </td>             </tr>          </table>       </div>       <ng-transclude></ng-transclude>       <div class="w-nodata-anynum" ng-show="mvData == null">'+
m+'</div>    </div>    <div class="w-any-num-title">{{mvData.title}}</div> </div>'}}]).directive("mvIdBox",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvId:"@",mvBodyId:"@",mvTitle:"@",mvSize:"@",mvClick:"&"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">     <div class="w-head lightbox-head" ng-click="mvClick()">{{mvTitle}}</div>     <div class="w-body lightbox-body" id="{{mvBodyId}}">        <ng-transclude></ng-transclude>     </div>  </div>'}}).directive("mvTableList",
function(){return{restrict:"E",replace:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}}</div>    <div class="w-body lightbox-body">       <div class="w-table-list" ng-style="{{mvStyle}}">          <table ng-repeat="stats in mvData">             <tr><th class="mv-table-list-title" colspan="2">{{stats.title}}</th></tr>             <tr ng-repeat="stat in stats.data">                <th>&emsp;<span class="{{stat.color}} || w-c{{$index}}">&emsp;</span> {{stat.title}}</th>                <td>{{stat.number}}</td>             </tr>             <tr><td>&nbsp;</td></tr>          </table>       </div>    </div> </div>'}}).directive("mvTable",
function(){return{restrict:"E",replace:!0,transclude:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvShowFilter:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">     <div class="w-head lightbox-head">{{mvTitle}} <span ng-hide="mvShowFilter==\'false\'" class="w-table-input">Filter: <input type="text" ng-model="searchText" /></span></div>     <div class="w-body lightbox-body">        <div class="w-table" ng-style="{{mvStyle}}">           <table>              <tr>                 <th ng-repeat="header in mvData.mapping">{{header.title}}</th>              </tr>              <tr ng-repeat="row in mvData.rows | filter:searchText">                 <td ng-repeat="header in mvData.mapping" class="{{row[\'mv-color\']}}">{{row[header.value]}}</td>              </tr>           </table>        </div>        <ng-transclude></ng-transclude>     </div>  </div>'}}).directive("mvTableLink",
function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">    <div class="w-head lightbox-head">{{mvTitle}} <span class="w-table-input">Filter: <input type="text" ng-model="searchText" /></span></div>    <div class="w-body lightbox-body">       <div class="w-table" ng-style="{{mvStyle}}">          <table>             <tr>                <th ng-repeat="header in mvData.mapping">{{header.title}}</th>             </tr>             <tr ng-repeat="row in mvData.rows | filter:searchText">                <td ng-repeat="header in mvData.mapping" class="{{row[\'mv-color\']}}" title="{{row[header.value]}}">                   <a href=\'{{mvData.links[row[header.value]][header.value]}}\' ng-if="mvData.links[row[header.value]][header.value]!=undefined">{{row[header.value]}}</a>                   <span ng-if="mvData.links[row[header.value]][header.value]==undefined">{{row[header.value]}}</span>                </td>             </tr>          </table>       </div>       <ng-transclude></ng-transclude>    </div> </div>'}}).directive("mvTableFunction",
function(){return{restrict:"E",replace:!0,transclude:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvShowFilter:"@",mvClickItem:"&"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">      <div class="w-head lightbox-head">{{mvTitle}} <span ng-hide="mvShowFilter==\'false\'" class="w-table-input">Filter: <input type="text" ng-model="searchText" /></span></div>      <div class="w-body lightbox-body">         <div class="w-table" ng-style="{{mvStyle}}">            <table>               <tr>                  <th ng-repeat="header in mvData.mapping">{{header.title}}</th>               </tr>               <tr ng-repeat="row in mvData.rows | filter:searchText">                  <td ng-repeat="header in mvData.mapping" class="{{row[\'mv-color\']}}">                     <a class="click" ng-click="mvClick(row)" ng-if="mvData.parameters[row[header.value]][header.value]!=undefined">{{row[header.value]}}</a>                     <span ng-if="mvData.parameters[row[header.value]][header.value]==undefined">{{row[header.value]}}</span>                  </td>               </tr>            </table>         </div>         <ng-transclude></ng-transclude>      </div>   </div>',
link:function(m,H,q){m.mvClick=function(q){m.mvClickItem({item:q})}}}}).directive("mvTableSelect",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvFilter:"=",mvFiltered:"="},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">     <div class="w-head lightbox-head">        {{mvTitle}}         <span class="w-table-input">           <select ng-model="mvFiltered" ng-options="filter as filter.name for filter in mvFilter"></select>        </span>     </div>     <div class="w-body lightbox-body">        <div class="w-table" ng-style="{{mvStyle}}">           <table>              <tr>                 <th ng-repeat="header in mvData.mapping">{{header.title}}</th>              </tr>              <tr ng-repeat="row in mvData.rows | filter: { mvselect: mvFiltered.key }">                 <td ng-repeat="header in mvData.mapping" class="{{row[\'mv-color\']}}">{{row[header.value]}}</td>              </tr>           </table>        </div>     </div>  </div>'}}).directive("mvTableSelectFunction",
function(){return{restrict:"E",transclude:!0,replace:!0,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@",mvFilter:"=",mvFiltered:"=",mvClick:"&"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}">      <div class="w-head lightbox-head">         {{mvTitle}}          <span class="w-table-input">            <select ng-model="mvFiltered" ng-options="filter as filter.name for filter in mvFilter"></select>         </span>      </div>      <div class="w-body lightbox-body">         <div class="w-table" ng-style="{{mvStyle}}">            <table>               <tr>                  <th ng-repeat="header in mvData.mapping">{{header.title}}</th>               </tr>               <tr ng-repeat="row in mvData.rows | filter: { mvselect: mvFiltered.key }">                  <td ng-repeat="header in mvData.mapping" class="{{row[\'mv-color\']}}">                     <a class="click" ng-click="mvClick(mvData.parameters[row[header.value]][header.value])" ng-if="mvData.parameters[row[header.value]][header.value]!=undefined">{{row[header.value]}}</a>                     <span ng-if="mvData.parameters[row[header.value]][header.value]==undefined">{{row[header.value]}}</span>                  </td>               </tr>            </table>         </div>      </div>   </div>'}}).directive("mvChart",
["minerva","errMsg",function(m,C){return{restrict:"E",scope:{mvData:"=",mvOptions:"="},template:'<div class="w-nodata" ng-show="mvData == null">'+C+"</div>",link:function(q,I,C,Da,Ea){function J(){if(void 0!=q.mvData){d=q.mvData;c=ka(sa,q.mvOptions);u=c.chart.margin;l=0==c.chart.height?parseInt(d3.select(I[0].parentElement.parentElement.parentElement).style("height"),10)-u.top-u.bottom:c.chart.height-u.top-u.bottom;f=0==c.chart.width?parseInt(d3.select(I[0].parentElement.parentElement.parentElement).style("width"),
10)-u.left-u.right:c.chart.width-u.left-u.right;Q=c.xAxis.orient;R=c.yAxis.orient;var b=1,g=0;switch(c.chart.type){case "bar":b=.1;null==c.xAxis.spacing&&(g=1);break;case "line":b=1,null==c.xAxis.spacing&&(g=1)}null!=c.xAxis.spacing&&(g=c.xAxis.spacing);"hbar"!=c.chart.type?(h=d3.scale.ordinal().rangeRoundBands([0,f],b,g),n=d3.scale.linear().range([l,0])):(h=d3.scale.linear().range([0,f]),n=d3.scale.ordinal().rangeRoundBands([l,0],1,0));r=d3.scale.ordinal().range(c.chart.colors);F=d3.svg.axis().scale(h).orient(Q).ticks(c.yAxis.ticks).tickSize([c.xAxis.tickSize]).tickPadding([c.xAxis.tickPadding]);
""!=c.xAxis.labels.format&&F.tickFormat(d3.format(c.xAxis.labels.format));K=d3.svg.axis().scale(n).orient(R).ticks(c.yAxis.ticks).tickSize([c.yAxis.tickSize]).tickPadding([c.yAxis.tickPadding]);""!=c.yAxis.labels.format&&K.tickFormat(d3.format(c.yAxis.labels.format));I.empty();e=d3.select(I[0]).append("svg").attr("width",f+u.left+u.right).attr("height",l+u.top+u.bottom).style("background",c.chart.backgroundColor).style("fill",c.chart.backgroundColor).append("g").attr("transform","translate("+u.left+
","+u.top+")");"map"!=c.chart.type&&"hbar"!=c.chart.type&&"treebar"!=c.chart.type&&"dragbar"!=c.chart.type&&("bar"!=c.chart.type&&r.domain(d3.keys(d[0]).filter(function(a){return"x"!==a})),d.forEach(function(a){a.y=+a.y}));"hbar"==c.chart.type&&d.forEach(function(a){a.x=+a.x});var t=d3.format(c.tooltip.format);p=d3.tip().attr("class","mvTip").offset([-20,0]).html(function(a){var b=a.x,g=t(a.y);if(void 0!=a.pointName)return"<strong>"+a.pointName+"</strong>";switch(c.chart.type){case "bar":1==c.types.bar.stacked&&
(g=t(a.y1-a.y0));break;case "hbar":b=a.label;break;case "treebar":b=a.name;g=a.nochildren?t(a.value):t(a.number);break;case "dragbar":b=a.title;g=a.time.end-a.time.start;break;case "bubble":b=a.id+"<br/>"+a.label;g=t(a.value);break;case "pie":b=a.data.x;g=t(a.data.y);break;case "scatter":b=a.z;g=a.x+", "+a.y;break;case "map":switch(c.types.map.mapfile){case "afg":b=a.properties.name;g=t(D.get(a.id));if(void 0==D.get(a.id))return"<strong>"+b+"</strong>";break;case "us-states":b=ea(a.id,"states")||
"Name";g=t(D.get(a.id));if(void 0==D.get(a.id))return"<strong>"+b+"</strong>";break;default:if(b=ea(a.id,"countries")||"Name",g=t(D.get(a.id)),void 0==D.get(a.id))return"<strong>"+b+"</strong>"}}return'<div style="font-size:'+c.tooltip.size+'"><strong>'+b+':</strong> <span style="color:'+c.tooltip.color+'">'+c.tooltip.prefix+g+c.tooltip.suffix+"</span></div>"});e.call(p);switch(c.chart.type){case "pie":var k=Math.min(f,l)/2,la=k+c.types.pie.labelRadius,b=d3.layout.pie().sort(null).value(function(a){return a.y}),
ma=0==c.types.pie.burst?d3.svg.arc().outerRadius(k-10).innerRadius(c.types.pie.innerRadius):d3.svg.arc().outerRadius(function(a){return a.data.y/c.types.pie.scale*(k-c.types.pie.innerRadius)+c.types.pie.innerRadius}).innerRadius(c.types.pie.innerRadius);r.domain(d3.keys(d[0].data).filter(function(a){return"x"!==a}));var z=e.selectAll(".arc").data(b(d)).enter().append("g").attr("class","arc").attr("transform","translate("+f/2+","+l/2+")");z.append("path").attr("d",ma).style("fill",function(a){return r(a.data.x)}).style("cursor",
"pointer").on("click",function(a){p.hide();q.$emit("pieChart:click",a)}).on("mouseover",p.show).on("mouseout",p.hide);1==c.types.pie.labels.enabled&&(b=function(a){return a.data.x},1==c.types.pie.labels.percent&&(b=function(a){return Math.round(a.data.y/d.reduce(function(a,b){return a+b.y},0)*100)+"%"}),z.append("text").attr("transform",function(a){var b=ma.centroid(a);a=b[0];var b=b[1],c=Math.sqrt(a*a+b*b);return"translate("+a/c*la+","+b/c*la+")"}).attr("dy",".35em").style("text-anchor",function(a){return(a.endAngle+
a.startAngle)/2>Math.PI?"end":"start"}).text(b).style("fill",c.types.pie.labels.color).style("font-weight",c.types.pie.labels.fontWeight).style("font-size",c.types.pie.labels.fontSize));break;case "map":var D=d3.map(),z=e.append("g"),x=d3.scale.quantize().domain(c.types.map.quantizeScale).range(c.chart.colors);void 0!=d.choropleth&&d.choropleth.forEach(function(a){D.set(a.x,+a.y)});b="";switch(c.types.map.mapfile){case "world":b=m.mapsPath()+"world-110m.txt";A=1==c.types.map.globe?d3.geo.orthographic().scale(.5*
f).translate([f/2,l/2]).clipAngle(90):d3.geo.ginzburg8().center([0,20]).scale(f/1.4/Math.PI).translate([f/2,l/2]);break;case "afg":b=m.mapsPath()+"afg.txt";A=d3.geo.mercator().center([67.5,34]).scale(f*l/100).translate([f/2,l/2]);break;default:b=m.mapsPath()+"us.txt",A=d3.geo.albersUsa().scale(1.5*f).translate([f/2,l/2])}1==c.types.map.detailed&&"world"==c.types.map.mapfile&&(b=m.mapsPath()+"world-50m.txt");1==c.types.map.satellite.enabled&&(A=ta().distance(c.types.map.satellite.distance).scale(c.types.map.satellite.scale).rotate(c.types.map.satellite.rotate).center(c.types.map.satellite.center).tilt(c.types.map.satellite.tilt).clipExtent([[0,
0],[f,l]]).precision(.1));B=d3.geo.path().projection(A);d3.json(b,function(a,b){var g=null,k=null;1==c.types.map.simplify&&(b=topojson.presimplify(b));switch(c.types.map.mapfile){case "afg":k=g=b.objects.afghan;break;case "us-counties":g=b.objects.counties;k=b.objects.states;break;case "us-states":k=g=b.objects.states;break;case "world":k=g=b.objects.countries;break;default:k=g=b.objects.states}if(0==c.types.map.globe)z.append("g").attr("class",c.types.map.mapfile).selectAll("path").data(topojson.feature(b,
g).features).enter().append("path").style("fill",function(a){return x(D.get(a.id))}).attr("d",B).on("click",function(a){na(a);var b="";switch(c.types.map.mapfile){case "us-counties":b="states";break;case "us-states":b="states";break;case "world":b="countries"}a.name=ea(a.id,b);a:{var g=a.id;switch(b){case "countries":for(i=0;i<H.length;i++)if(H[i].id==g){b=H[i].di;break a}break;case "states":for(i=0;i<P.length;i++)if(P[i].id==g){b=P[i].di;break a}}b=void 0}a.di=b;q.$emit("mapChart:click",a)}).on("mouseover",
p.show).on("mouseout",p.hide),z.append("path").datum(topojson.mesh(b,k,function(a,b){return a!==b})).attr("class","mapborders").style("fill","none").attr("class","mapstroke").style("stroke-linejoin","round").attr("d",B);else{var t=Date.now();d3.select(I[0]).on("mousemove",oa).on("mouseup",ua);e.on("mousedown",va);k=e.append("defs").append("radialGradient").attr("id","globe_shading").attr("cx","55%").attr("cy","45%");k.append("stop").attr("offset","60%").attr("stop-color","#fff").attr("stop-opacity",
"0");k.append("stop").attr("offset","100%").attr("stop-color","#7B8996").attr("stop-opacity","0.2");z.append("circle").attr("cx",f/2).attr("cy",l/2).attr("r",A.scale());1==c.types.map.grid&&(k=d3.geo.graticule(),z.append("path").datum(k).attr("class","graticule").attr("d",B));z.append("g").selectAll("path").data(topojson.feature(b,g).features).enter().append("path").attr("class","world").style("fill",function(a){return x(D.get(a.id))}).attr("d",B).on("click",na).on("mouseover",p.show).on("mouseout",
p.hide);z.append("circle").attr("cx",f/2).attr("cy",l/2).attr("r",A.scale()).style("fill","url(#globe_shading)");1==c.types.map.rotate&&d3.timer(function(){var a=Date.now()-t;A.rotate([10+.003*a,0]);e.selectAll("path").attr("d",B)})}void 0!=d.points&&1==c.types.map.showPoints&&(B.pointRadius(function(a){return a.radius}),z.append("g").selectAll("path").data(d.points).enter().append("path").datum(function(a){return{type:"Point",coordinates:[a.Lon,a.Lat],radius:a.Magnitude,color:a.Color,pointName:a.pointName,
image:a.image}}).attr("fill",function(a){return a.color}).attr("class","point").attr("d",B).on("click",function(a){q.$parent.openModal(a)}).on("mouseover",p.show).on("mouseout",p.hide))});break;case "bubble":var C={x:f/2,y:l/2},S=[],E={},pa=[];d.forEach(function(a,b){void 0==E[a.x]&&(E[a.x]="",S.push(a.x),pa[a.x]=a.sublabel)});var fa=[];S.forEach(function(a,b){fa[a]={x:(f/S.length+1)*(b+.5),y:l/2}});var G=[];S.forEach(function(a,b){G[a]=(f/S.length+1)*(b+.5)});var X=[],b=d3.max(d,function(a){return parseInt(a.y,
10)}),wa=d3.scale.pow().exponent(.5).domain([0,b]).range([2,c.types.bubble.scale]);d.forEach(function(a){a={id:a.x,label:a.label,radius:wa(parseInt(a.y,10)),value:a.y,data:a.data,x:900*Math.random(),y:800*Math.random()};X.push(a)});X.sort(function(a,b){return b.id-a.id});r.domain(S);var U=e.selectAll("circle").data(X,function(a){return a.x});U.enter().append("circle").attr("r",0).attr("fill",function(a){return r(a.id)}).attr("stroke-width",1).attr("stroke",function(a){return d3.rgb(r(a.id)).darker()}).attr("class",
"circle").attr("id",function(a){return"bubble_"+a.id}).on("click",function(a){p.hide();q.$emit("bubbleChart:click",a)}).on("mouseover",p.show).on("mouseout",p.hide);U.transition().duration(2E3).attr("r",function(a){return a.radius});xa(X);ya(U,fa,C);if(1==c.types.bubble.control.enabled)e.append("text").attr("x",c.types.bubble.control.x).attr("y",c.types.bubble.control.y).attr("dy",".35em").attr("id","bubbleControl").attr("font-family",'"Courier New", Courier, monospace').style("fill",c.types.bubble.control.color).style("text-anchor",
"start").style("cursor","pointer").text(c.types.bubble.control.opentext).on("click",function(){var a=c.types.bubble.control.opentext,b=c.types.bubble.control.closetext;document.getElementById("bubbleControl").textContent="all"==Y?b:a;"all"==Y?(za(U,fa,G,pa),Y="group"):(Aa(U,C),Y="all")});break;default:"hbar"!=c.chart.type&&"treebar"!=c.chart.type&&"dragbar"!=c.chart.type&&(h.domain(d.map(function(a){return a.x})),n.domain([0,d3.max(d,function(a){return a.y})]));switch(c.chart.type){case "bar":if(1==
c.types.bar.stacked||1==c.types.bar.grouped){if(1==c.types.bar.grouped){r.domain(d3.keys(d[0]).filter(function(a){return"x"!==a&&"y"!==a&&"total"!==a&&"data"!==a}));b=d3.keys(d[0]).filter(function(a){return"x"!==a&&"y"!==a&&"total"!==a&&"data"!==a});d.forEach(function(a){a.data=r.domain().map(function(b){return{x:b,y:+a[b]}})});var ga=d3.scale.ordinal();ga.domain(b).rangeRoundBands([0,h.rangeBand()]);n.domain([0,d3.max(d,function(a){return d3.max(a.data,function(a){return a.y})})])}else r.domain(d3.keys(d[0]).filter(function(a){return"x"!==
a&&"y"!==a&&"total"!==a&&"data"!==a})),d.forEach(function(a){var b=0;a.data=r.domain().map(function(c){return{x:c,y0:b,y1:b+=+a[c]}});switch(c.types.bar.stacking){case "percent":a.data.forEach(function(a){a.y0/=b;a.y1/=b}),K.tickFormat(d3.format("0%")),c.tooltip.format="0%"}a.total=a.data[a.data.length-1].y1}),n.domain([0,d3.max(d,function(a){return a.total})]);r.domain().map(function(a){return{x:a,values:d.map(function(b){return{x:b.x,y:+b[a]}})}});1==c.yAxis.gridlines&&e.append("g").attr("class",
"grid").call(Z(n,R,c.yAxis.ticks).tickSize(-f-u.right,0,0).tickFormat(""));1==c.xAxis.gridlines&&e.append("g").attr("class","grid").call(aa(h,Q,c.xAxis.ticks).tickSize(l,0,0).tickFormat(""));b=e.selectAll(".bars").data(d).enter().append("g").attr("class","g").attr("transform",function(a){return"translate("+h(a.x)+",0)"});b.selectAll(".bar").data(function(a){return a.data}).enter().append("rect").attr("class","bar").style("fill",function(a){return r(a.x)}).on("mouseover",p.show).on("mouseout",p.hide);
1==c.types.bar.grouped?b.selectAll(".bar").attr("x",function(a){return ga(a.x)}).attr("y",function(a){return n(a.y)}).attr("height",function(a){return l-n(a.y)}).attr("width",ga.rangeBand()):b.selectAll(".bar").attr("y",function(a){return n(a.y1)}).attr("height",function(a){return n(a.y0)-n(a.y1)}).attr("width",h.rangeBand());if(1==c.types.bar.labels.enabled&&1==c.types.bar.stacked){var N=[];b.selectAll("text").data(d).enter().append("text").attr("x",function(a){return.45>=c.xAxis.spacing?h(a.x)+
f/d.length*(.45-c.xAxis.spacing):1<=c.xAxis.spacing?h(a.x)+f/d.length*(.6-c.xAxis.spacing):.8<=c.xAxis.spacing?h(a.x)+f/d.length*(.55-c.xAxis.spacing):h(a.x)+f/d.length*(.5-c.xAxis.spacing)}).attr("y",function(a){return n(a.total)}).attr("dy",-5).attr("text-anchor","middle").attr("fill","#A6A6A6").attr("font-size","0.9em").text(function(a,b){if(void 0==N[b])return N[b]="",c.types.bar.labels.prefix+t(a.total)+c.types.bar.labels.suffix})}}else 1==c.yAxis.gridlines&&e.append("g").attr("class","grid").call(Z(n,
R,c.yAxis.ticks).tickSize(-f-u.right,0,0).tickFormat("")),1==c.xAxis.gridlines&&e.append("g").attr("class","grid").call(aa(h,Q,c.xAxis.ticks).tickSize(l,0,0).tickFormat("")),e.selectAll(".bar").data(d).enter().append("rect").attr("class","bar").attr("x",function(a){return h(a.x)}).attr("width",h.rangeBand()).attr("y",function(a){return n(a.y)}).attr("height",function(a){return l-n(a.y)}).style("fill",function(a){return r(a.x)}).on("mouseover",p.show).on("mouseout",p.hide);break;case "hbar":var T=
d.length,b=d3.layout.stack(),J=d.map(function(a){return a.key}),b=b(d3.range(100).map(function(a){for(var b=[],c=0;c<T;++c)b[c]={x:J[c],y:d[c]["value"+(a+1)],color:d[c]["color"+(a+1)],label:d[c]["label"+(a+1)],children:d[c].children};return b})),g=d3.max(b,function(a){return d3.max(a,function(a){return a.y0+a.y})});n=d3.scale.ordinal().domain(J).rangeRoundBands([2,l],.08);L=n.rangeBand();null==c.types.bar.xdomain?h.domain([0,g]):h.domain(c.types.bar.xdomain);e.selectAll(".layer").data(b).enter().append("g").attr("class",
"layer").selectAll("rect").data(function(a){return a}).enter().append("rect").attr("y",function(a){return n(a.x)}).attr("x",function(a){return h(a.y0)}).attr("height",n.rangeBand()).attr("width",function(a){return h(a.y)}).style("stroke","#000000").style("fill",function(a,b){return a.color}).on("mouseover",p.show).on("mouseout",p.hide);K=d3.svg.axis().scale(n).tickSize(1).tickPadding(6).tickValues(J).orient("left");0==c.yAxis.labels.enabled&&K.tickValues("");e.append("g").attr("class","y axis").attr("fill",
"#A6A6A6").call(K);break;case "treebar":b=d3.layout.partition().value(function(a){return a.size}).sort(function(a,b){return a.order-b.order});L=20;h=d3.scale.linear().range([0,f]);F=d3.svg.axis().scale(h).orient("bottom");e.append("rect").attr("class","background").attr("width",f).attr("height",l).attr("cursor","pointer").on("click",Ba);e.append("g").attr("class","y axis").append("line").attr("y1","86%");b.nodes(d);h.domain([0,d.value]).nice();qa(d,0);break;case "dragbar":var O=d.team,V="0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80".split(" "),
ba=f/V.length,W=function(a,b,c){return _.chain(c).map(function(c){if(a.id!=c.id){if(0<_.intersection(a.assigned,c.assigned).length){var g=y(v.parse(c.time.start));c=y(v.parse(c.time.end));var k=b[0],t=b[0]+(y(v.parse(a.time.end))-y(v.parse(a.time.start)));return k<g&&t>g||k>g&&k<c}a.assigned!=c.assigned&&(w(c.assigned),w(a.assigned))}return!1}).contains(!0).value()},ca=[],v=d3.time.format("%I"),b=d3.behavior.drag().origin(Object).on("drag",function(a,b){var c=d3.select(this),g=d3.transform(c.attr("transform")).translate;
W(a,g,d.tasks)?c.style("fill","red"):c.style("fill",a.color);c.attr("transform","translate("+Math.min(f-c[0][0].firstChild.firstChild.attributes[c[0][0].firstChild.firstChild.attributes.length-2].value,Math.max(0,+d3.event.dx+g[0]))+","+Math.min(l-c[0][0].firstChild.firstChild.attributes[c[0][0].firstChild.firstChild.attributes.length-1].value,Math.max(0,+d3.event.dy+g[1]))+")")}).on("dragend",function(a,b){var c=d3.select(this),g=d3.transform(c.attr("transform")).translate,k=V[Math.floor(g[0]/ba)],
t=O[Math.floor(g[1]/w.rangeBand())];W(a,g,d.tasks)?(c.attr("transform",function(a){return"translate("+y(v.parse(a.time.start))+",0)"}),c.style("fill",a.color)):(c.attr("transform",function(){return"translate("+y(v.parse(k))+","+w(t)+")"}),c=(v.parse(d.tasks[a.id].time.end)-v.parse(d.tasks[a.id].time.start))/6E4,d.tasks[a.id].time.start=k,d.tasks[a.id].time.end=v(d3.time.minute.offset(v.parse(k),c)),d.tasks[a.id].assigned[0]=t,da())}),g=V.map(v.parse);O.forEach(function(a){var b={};V.forEach(function(a){b[a]=
{occupied:!1,course:""}});ca.push(b.assigned=a)});var w=d3.scale.ordinal().domain(O).rangeRoundBands([0,l],.01),y=d3.time.scale().domain([g[0],g[g.length-1]]).rangeRound([0,f]);e.append("g").attr("class","time axis").attr("transform","translate(0,"+l+")").call(d3.svg.axis().scale(y).orient("top").ticks(V.length).tickSize(l+5,0,0).tickFormat(""));e.append("g").attr("class","team axis").attr("transform","translate("+f+","+(w.rangeBand()/2+2)+")").call(d3.svg.axis().scale(w).orient("left").tickSize(f,
0,0));e.append("g").attr("class","team axis").style("fill",c.yAxis.title.color).call(d3.svg.axis().scale(w).orient("left").tickSize(0).tickPadding(8));b=e.selectAll("g.course").data(d.tasks).enter().append("g").attr("class","course").style("fill",function(a){return a.color}).attr("transform",function(a){return"translate("+y(v.parse(a.time.start))+",0)"}).on("mouseover",p.show).on("mouseout",p.hide).call(b).selectAll("g.section").data(function(a){return a.assigned.map(function(b){return{assigned:b,
time:a.time,title:a.title}})}).enter().append("g").attr("class","section");b.append("rect").attr("class","section").attr("x",0).attr("y",function(a){return w(a.assigned)}).attr("height",w.rangeBand()).attr("width",function(a){return y(v.parse(a.time.end))-y(v.parse(a.time.start))});b.append("text").style("fill","white").attr("x",2).attr("y",function(a){return w(a.assigned)+w.rangeBand()/2+6}).text(function(a){return a.title});var da=function(){e.selectAll("g.course").data(d.tasks).attr("transform",
function(a){return"translate("+y(v.parse(a.time.start))+","+w(a.assigned)+")"})};break;case "line":r.domain(d3.keys(d[0]).filter(function(a){return"x"!==a&&"y"!==a&&"total"!==a&&"data"!==a}));var M=r.domain().map(function(a){return{x:a,values:d.map(function(b){return{x:b.x,y:b[a]}})}}),b=0,b="min"==c.yAxis.min?d3.min(M,function(a){return d3.min(a.values,function(a){return a.y})}):parseInt(c.yAxis.min);n.domain([b,d3.max(M,function(a){return d3.max(a.values,function(a){return a.y})})]);1==c.yAxis.gridlines&&
e.append("g").attr("class","grid").call(Z(n,R,c.yAxis.ticks).tickSize(-f-u.right,0,0).tickFormat(""));1==c.xAxis.gridlines&&e.append("g").attr("class","grid").call(aa(h,Q,c.xAxis.ticks).tickSize(l,0,0).tickFormat(""));var ja=d3.svg.line().x(function(a){return h(a.x)}).y(function(a){return n(a.y)}).defined(function(a){return null!=a.y});e.selectAll(".zn").data(M).enter().append("g").attr("class","zn").append("path").attr("class","line").attr("d",function(a){return ja(a.values)}).style("stroke",function(a){return r(a.x)});
break;case "scatter":h=d3.scale.linear().range([0,f]);F.scale(h);b=d3.max(d,function(a){return a.x});g=d3.max(d,function(a){return a.y});h.domain([0,b]);n.domain([0,g]);var ra={};d.forEach(function(a){ra[a.z]=""});r.domain(d3.keys(ra));1==c.yAxis.gridlines&&e.append("g").attr("class","grid").call(Z(n,R,c.yAxis.ticks).tickSize(-f-u.right,0,0).tickFormat(""));1==c.xAxis.gridlines&&e.append("g").attr("class","grid").call(aa(h,Q,c.xAxis.ticks).tickSize(l,0,0).tickFormat(""));e.selectAll(".dot").data(d).enter().append("circle").attr("class",
"dot").attr("r",3.5).attr("cx",function(a){return h(a.x)}).attr("cy",function(a){return n(a.y)}).style("fill",function(a){return r(a.z)}).on("mouseover",p.show).on("mouseout",p.hide)}if("dragbar"!=c.chart.type&&(e.append("g").attr("class","x axis").attr("id","xAxis").style("fill",c.xAxis.labels.color).attr("transform","translate(0,"+l+")").call(F).append("text").attr("x",f/2).attr("y",.75*u.bottom).style("text-anchor","middle").style("fill",c.xAxis.title.color).style("font-size",c.xAxis.title.size).text(c.xAxis.title.text),
1==c.xAxis.labels.links))e.select("#xAxis").selectAll(".tick").attr("cursor","pointer").on("click",function(a){document.location.href=c.xAxis.labels.linkTarget});"hbar"!=c.chart.type&&"treebar"!=c.chart.type&&"dragbar"!=c.chart.type&&e.append("g").attr("class","y axis").style("fill",c.yAxis.labels.color).call(K).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.7em").style("text-anchor","end").style("fill",c.yAxis.title.color).style("font-size",c.yAxis.title.size).text(c.yAxis.title.text)}if(1==
c.legend.enabled){var ha=d,b=function(a){return r(a.x)},g=function(a){return a.x},ia=18;switch(c.chart.type){case "line":ha=M;break;case "map":ha=c.types.map.quantizeScale,b=function(a){return x(a)},g=function(a){return a},ia=20}M=e.selectAll(".legend").data(ha).enter().append("g").attr("class","legend").attr("transform",function(a,b){return"translate(0,"+20*b+")"});e.append("text").attr("x",c.legend.position.x).attr("y",c.legend.position.y-15).attr("dy",".35em").style("fill",c.legend.color).style("text-anchor",
"start").text(c.legend.title);M.append("rect").attr("x",c.legend.position.x).attr("y",c.legend.position.y).attr("width",ia).attr("height",ia).style("fill",b);M.append("text").attr("x",c.legend.position.x+22).attr("y",c.legend.position.y+8).attr("dy",".35em").style("fill",c.legend.color).style("text-anchor","start").text(g)}""!=c.chart.sort&&Ca()}}function qa(b,c){if(b.children&&!this.__transition__&&!b.nochildren){var t=750+25*b.children.length,k=e.selectAll(".enter").attr("class","exit");k.selectAll("rect").filter(function(c){return c===
b}).style("fill-opacity",1E-6);var d=ba(b).attr("transform",W(c)).style("opacity",1);d.select("text").style("fill-opacity",1E-6);h.domain([0,d3.max(b.children,function(b){return b.nochildren?b.value:b.number})]).nice();e.selectAll(".x.axis").transition().duration(750).call(F);d=d.transition().duration(750).delay(function(b,c){return 25*c}).attr("transform",function(b,c){return"translate(0,"+L*c*1.2+")"});d.select("text").style("fill-opacity",1);d.select("rect").attr("width",function(b){return b.nochildren?
h(b.value):h(b.number)});k.transition().duration(750).style("opacity",1E-6).remove().selectAll("rect").attr("width",function(b){return b.nochildren?h(b.value):h(b.number)});e.select(".background").datum(b).transition().duration(t);b.index=c}}function Ba(b){if(b.parent&&!this.__transition__){var c=750+25*b.children.length,t=e.selectAll(".enter").attr("class","exit"),k=ba(b.parent).attr("transform",function(b,c){return"translate(0,"+L*c*1.2+")"}).style("opacity",1E-6);k.select("rect").style("fill",
function(b){return b.color}).filter(function(c){return c===b}).style("fill-opacity",1E-6);h.domain([0,d3.max(b.parent.children,function(b){return b.nochildren?b.value:b.number})]).nice();e.selectAll(".x.axis").transition().duration(750).call(F);k.transition().duration(c).style("opacity",1).select("rect").attr("width",function(b){return b.nochildren?h(b.value):h(b.number)}).each("end",function(c){c===b&&d3.select(this).style("fill-opacity",null)});k=t.selectAll("g").transition().duration(750).delay(function(b,
c){return 25*c}).attr("transform",W(b.index));k.select("text").style("fill-opacity",1E-6);k.select("rect").attr("width",function(b){return b.nochildren?h(b.value):h(b.number)}).style("fill",r(!0));t.transition().duration(c).remove();e.select(".background").datum(b.parent).transition().duration(c)}}function ba(b){b=e.insert("g",".y.axis").attr("class","enter").attr("transform","translate(0,5)").selectAll("g").data(b.children).enter().append("g").style("cursor",function(b){return!b.children||b.nochildren?
null:"pointer"}).style("fill","#A6A6A6").on("click",qa);b.append("text").attr("x",-6).attr("y",L/2).attr("dy",".35em").style("text-anchor","end").text(function(b){return 20<b.name.length?b.name.substring(0,20)+"...":b.name});b.append("rect").attr("width",function(b){return h(b.value)}).attr("height",L).style("fill",function(b,c){return b.color}).on("mouseover",p.show).on("mouseout",p.hide);return b}function W(b){var c=0;return function(d){var k="translate("+c+","+L*b*1.2+")";c+=h(d.value);return k}}
function Z(b,c,d){return d3.svg.axis().scale(b).orient(c).ticks(d)}function aa(b,c,d){return d3.svg.axis().scale(b).orient(c).ticks(d)}function N(b){return-Math.pow(b.radius,2)/8}function xa(b){x=d3.layout.force().nodes(b).size([f,l])}function ya(b,c,d){x.gravity(-.01).charge(N).friction(.9).on("tick",function(k){b.each(ca(k.alpha,c)).attr("cx",function(b){return b.x}).attr("cy",function(b){return b.y})});setTimeout(function(){x.gravity(-.01).charge(N).friction(.9).on("tick",function(c){b.each(da(c.alpha,
d)).attr("cx",function(b){return b.x}).attr("cy",function(b){return b.y})})},1E3);x.start()}function Aa(b,c){x.gravity(-.01).charge(N).friction(.9).on("tick",function(d){b.each(da(d.alpha,c)).attr("cx",function(b){return b.x}).attr("cy",function(b){return b.y})});x.start();e.selectAll(".groups").remove()}function da(b,c){return function(d){d.x+=(c.x-d.x)*(.1+.02)*b;d.y+=(c.y-d.y)*(.1+.02)*b}}function za(b,c,d,k){x.gravity(-.01).charge(N).friction(.9).on("tick",function(d){b.each(ca(d.alpha,c)).attr("cx",
function(b){return b.x}).attr("cy",function(b){return b.y})});x.start();ja(d,k)}function ca(b,c){return function(d){var k=c[d.id];d.x+=(k.x-d.x)*(.1+.02)*b;d.y+=(k.y-d.y)*(.1+.02)*b}}function ja(b,c){var d=d3.keys(b),d=e.selectAll(".groups").data(d);d.enter().append("text").attr("class","groups").style("font-size","24px").attr("fill","#A6A6A6").attr("x",function(c){return b[c]}).attr("y",10).attr("text-anchor","middle").text(function(b){return b});d.enter().append("text").attr("class","groups").attr("fill",
"#A6A6A6").attr("x",function(c){return b[c]}).attr("y",32).attr("text-anchor","middle").text(function(b){return c[b]})}function va(){E=[d3.event.pageX,d3.event.pageY];O=A.rotate();d3.event.preventDefault()}function oa(){if(E){var b=[d3.event.pageX,d3.event.pageY],b=[O[0]+(b[0]-E[0])/6,O[1]+(E[1]-b[1])/6];b[1]=30<b[1]?30:-30>b[1]?-30:b[1];A.rotate(b);e.selectAll("path").attr("d",B)}}function ua(){E&&(oa(),E=null)}function na(b){if(1==c.types.map.zoom)if(G.node()===this)b=d3.select(this.parentNode.parentNode),
G.classed("active",!1),G=d3.select(null),b.transition().duration(750).attr("transform","");else{G.classed("active",!1);G=d3.select(this).classed("active",!0);var d=B.bounds(b),e=(d[0][0]+d[1][0])/2,k=(d[0][1]+d[1][1])/2,d=.9/Math.max((d[1][0]-d[0][0])/f,(d[1][1]-d[0][1])/l),e=[f/2-d*e,l/2-d*k];d3.select(this.parentNode.parentNode).transition().duration(750).attr("transform","translate("+e+")scale("+d+")");q.$parent.setCountry(b)}}function ea(b,c){switch(c){case "countries":for(i=0;i<H.length;i++)if(H[i].id==
b)return H[i].name;break;case "states":for(i=0;i<P.length;i++)if(P[i].id==b)return P[i].name}}function Ca(){var b=null;switch(c.chart.sort){case "y-descending":b=h.domain(d.sort(function(b,c){return d3.descending(b.y,c.y)}).map(function(b){return b.x})).copy();break;case "y-ascending":b=h.domain(d.sort(function(b,c){return d3.ascending(b.y,c.y)}).map(function(b){return b.x})).copy();break;case "x-descending":b=h.domain(d.sort(function(b,c){return d3.descending(b.x,c.x)}).map(function(b){return b.x})).copy();
break;case "x-ascending":b=h.domain(d.sort(function(b,c){return d3.ascending(b.x,c.x)}).map(function(b){return b.x})).copy()}var g=e.transition().duration(750),f=function(b,c){return 50*c};g.selectAll(".bar").delay(f).attr("x",function(c){return b(c.x)});g.select(".x.axis").call(F).selectAll("g").delay(f)}function ka(b){angular.forEach(arguments,function(c){c!==b&&angular.forEach(c,function(c,d){b[d]&&b[d].constructor&&b[d].constructor===Object?ka(b[d],c):b[d]=c})});return b}function ta(){var b=d3.geo.satellite(),
c=b.clipAngle,d=b.distance,e=180/Math.PI,h=Math.PI/180,f=b.tilt,l=b.stream,m=[0,0,0],n=d3.geo.rotation(m),p,q,r=d3.geo.projection(function(b,c){return[b,-c]}).scale(e).translate([0,0]);delete b.clipAngle;b.distance=function(h){if(!arguments.length)return d.call(b);d.call(b,h);c.call(b,Math.acos(1/+h)*e-1E-6);return b};b.rotate=function(c){if(!arguments.length)return m;n=d3.geo.rotation(m=[+c[0],+c[1],2<c.length&&+c[2]]);return b};b.tilt=function(c){if(!arguments.length)return f.call(b);f.call(b,c);
q=Math.acos(b.distance()*Math.cos(c*h)*.99)*e;r.clipAngle(180-q).rotate([0,180+c]);p=d3.geo.rotation([0,180+b.tilt()]);return b};b.stream=function(d){var e=l.call(b,d),h=d3.geo.circle().angle(c.call(b)-1E-6),f=q?r.stream({point:function(b,c){var d=p.invert([b,c]);e.point(d[0],d[1])},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}):e;return{point:function(b,c){var d=n([b,c]);f.point(d[0],d[1])},lineStart:function(){f.lineStart()},
lineEnd:function(){f.lineEnd()},polygonStart:function(){f.polygonStart()},polygonEnd:function(){f.polygonEnd()},sphere:function(){d3.geo.stream(h(),f)}}};return b.distance(b.distance())}var sa={chart:{height:0,width:0,margin:{top:40,right:-20,bottom:60,left:40},colors:["#427A82","#51BF96","#FBD163","#F29A3F","#DB5957"],backgroundColor:"#FFFFFF",sort:"",inverse:!1,type:"bar"},legend:{enabled:!1,color:"#A6A6A6",title:"",position:{x:0,y:0}},tooltip:{color:"#888888",format:"",size:"1em",suffix:"",prefix:""},
xAxis:{title:{color:"#A6A6A6",size:"1em",text:"X Axis"},labels:{format:"",color:"#A6A6A6",links:!1,linkTarget:""},gridlines:!1,orient:"bottom",spacing:null,ticks:null,tickSize:6,tickPadding:3},yAxis:{title:{color:"#A6A6A6",size:"1em",text:"Y Axis"},labels:{format:"0",color:"#A6A6A6",enabled:!1},gridlines:!1,orient:"left",ticks:null,tickSize:6,tickPadding:3,min:0},types:{bar:{stacked:!1,grouped:!1,stacking:"normal",labels:{enabled:!1,prefix:"Total: ",suffix:""},xdomain:null,heirarchy:!1,draggable:!1},
pie:{labels:{enabled:!1,color:"#FFFFFF",fontWeight:"normal",fontSize:"1em",percent:!1},burst:!1,evenslice:!1,scale:100,innerRadius:0,labelRadius:0},bubble:{scale:60,control:{enabled:!0,x:0,y:0,color:"#A6A6A6",openText:"[+]",openText:"[-]"}},map:{mapfile:"us-states",quantizeScale:[0,100],showPoints:!1,detailed:!1,simplify:!1,globe:!1,grid:!1,zoom:!1,rotate:!1,satellite:{enabled:!1,center:[-2,5],rotate:[76,-34.5,32.12],distance:1.1,tilt:25,scale:5500}}}},e=null,c=null,u=null,Q=null,R=null,l=null,f=
null,h=null,n=null,r=null,F=null,K=null,G=d3.select(null),p=null,d=[0],L=20,E,O,A=null,B=null,x,Y="all";J();q.$watch("mvData",J,!0);q.$watch("mvOptions",J,!0)}}}])})();